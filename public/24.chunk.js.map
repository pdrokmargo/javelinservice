{"version":3,"sources":["C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.component.html","C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.component.ts","C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.module.ts"],"names":[],"mappings":"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","file":"24.chunk.js","sourcesContent":["module.exports = \"<section class=\\\"chapter\\\">\\n    <section class=\\\"hero\\\">\\n        <div class=\\\"hero-content\\\">\\n            <h1 class=\\\"hero-title\\\">Mi perfil</h1>\\n        </div>\\n        <p class=\\\"hero-tagline\\\">\\n            A través de esta opción, usted podrá administrar la información de usuario.\\n        </p>\\n    </section>\\n    <article class=\\\"article padding-lg-v article-dark article-bordered\\\">\\n        <div class=\\\"container-fluid with-maxwidth\\\">\\n            <div class=\\\"row\\\">\\n                <div class=\\\"col-sm-12\\\">\\n                    <div class=\\\"box box-default\\\">\\n                        <div class=\\\"box-body\\\">\\n                            <div class=\\\"ibox-plain\\\">\\n\\n                                <form [hidden]=\\\"formActive == 'formPass'\\\" #modelForm=\\\"ngForm\\\" autocomplete=\\\"off\\\">\\n                                    <div class=\\\"row\\\">\\n\\n                                        <div class=\\\"col-sm-12 col-md-6 col-lg-6\\\">\\n                                            <div class=\\\"box-body\\\">    \\n                                                <mat-form-field class=\\\"full-width\\\">\\n                                                    <input type=\\\"text\\\" readonly id=\\\"firstname\\\" name=\\\"firstname\\\" [(ngModel)]=\\\"model.firstname\\\" matInput placeholder=\\\"Nombres\\\">\\n                                                </mat-form-field>\\n                                            </div>\\n                                        </div>\\n\\n                                        <div class=\\\"col-sm-12 col-md-6 col-lg-6\\\">\\n                                            <div class=\\\"box-body\\\">    \\n                                                <mat-form-field class=\\\"full-width\\\">\\n                                                    <input type=\\\"text\\\" readonly id=\\\"lastname\\\" name=\\\"lastname\\\" [(ngModel)]=\\\"model.lastname\\\" matInput placeholder=\\\"Apellidos\\\">\\n                                                </mat-form-field>\\n                                            </div>\\n                                        </div>\\n\\n                                        <div class=\\\"col-sm-12 col-md-6 col-lg-6\\\">\\n                                            <div class=\\\"box-body\\\">    \\n                                                <mat-form-field class=\\\"full-width\\\">\\n                                                    <input type=\\\"text\\\" readonly id=\\\"username\\\" name=\\\"username\\\" [(ngModel)]=\\\"model.username\\\" matInput placeholder=\\\"Usuario\\\">\\n                                                </mat-form-field>\\n                                            </div>\\n                                        </div>\\n\\n                                        <div class=\\\"col-sm-12 col-md-6 col-lg-6\\\">\\n                                            <div class=\\\"box-body\\\">    \\n                                                <mat-form-field class=\\\"full-width\\\">\\n                                                    <input type=\\\"email\\\" readonly id=\\\"email\\\" name=\\\"email\\\" [(ngModel)]=\\\"model.email\\\" matInput placeholder=\\\"Correo electronico\\\">\\n                                                </mat-form-field>\\n                                            </div>\\n                                        </div>\\n\\n                                        <div class='col-sm-12 col-md-6'>\\n                                            <div class=\\\"box-body\\\">                                \\n                                                <mat-select required class=\\\"full-width\\\" placeholder=\\\"Empresa por defecto\\\" [(ngModel)]=\\\"model.company_default_id\\\" name=\\\"company_default_id\\\"\\n                                                id=\\\"company_default_id\\\">\\n                                                    <mat-option *ngFor=\\\"let item of model.usersprivileges\\\" [value]=\\\"item.company.id\\\">{{item.company.name}}</mat-option>\\n                                                </mat-select>    \\n                                            </div>                                                                    \\n                                        </div>\\n\\n                                        <div class=\\\"col-sm-12\\\" [class.btn-action-container]=\\\"booActive\\\">\\n                                                \\n                                            <button [disabled]=\\\"action_active ? false : !modelForm.form.valid\\\" mat-raised-button color=\\\"primary\\\"\\n                                            class=\\\"btn-w-md no-margin-left btn-right\\\" (click)=\\\"updateProfile()\\\">Guardar</button>\\n                                          \\n                                            <button mat-raised-button color=\\\"primary\\\" class=\\\"btn-w-md no-margin-left btn-right\\\" (click)=\\\"formActive = 'formPass'\\\">Cambiar contraseña</button>\\n\\n                                        </div>\\n                                     \\n                                        <!--div class=\\\"col-sm-12 btn-right\\\">\\n                            <button mat-raised-button color=\\\"primary\\\" class=\\\"btn-w-md\\\" [disabled]=\\\"!myprofileForm.form.valid\\\">Actualizar</button>\\n                        </div-->\\n                                    </div>\\n                                </form>\\n                                <form [hidden]=\\\"formActive == 'form'\\\" #updatePassForm=\\\"ngForm\\\" autocomplete=\\\"off\\\">\\n                                    <div class=\\\"row\\\">\\n                                        <div class=\\\"col-sm-12\\\">\\n                                            <h5>Actualiza contraseña</h5>\\n                                        </div>\\n                                        <div class=\\\"form-group col-sm-12 col-md-6\\\">\\n                                            <mat-form-field class=\\\"full-width\\\">\\n                                                <input required type=\\\"password\\\" id=\\\"password1\\\" name=\\\"password1\\\" [(ngModel)]=\\\"pass.password1\\\" matInput placeholder=\\\"Contraseña\\\"\\n                                                    validateEqual=\\\"password2\\\" reverse=\\\"true\\\">\\n                                            </mat-form-field>\\n                                        </div>\\n                                        <div class=\\\"form-group col-sm-12 col-md-6\\\">\\n                                            <mat-form-field class=\\\"full-width\\\">\\n                                                <input required type=\\\"password\\\" #password2=\\\"ngModel\\\" id=\\\"password2\\\" name=\\\"password2\\\" [(ngModel)]=\\\"pass.password2\\\" matInput\\n                                                    placeholder=\\\"Confirmar\\\" validateEqual=\\\"password1\\\" reverse=\\\"false\\\">\\n                                            </mat-form-field>\\n                                        </div>\\n                                        <div class=\\\"col-sm-12\\\">\\n                                            <small [hidden]=\\\"password2.valid || (password2.pristine && !updatePassForm.submitted)\\\" class=\\\"text-danger\\\">La contraseña no son iguales</small>\\n                                        </div>\\n                                        <div class=\\\"col-sm-12 btn-right\\\">\\n                                            <button mat-raised-button color=\\\"primary\\\" class=\\\"btn-w-md\\\" [disabled]=\\\"!updatePassForm.form.valid\\\" (click)=\\\"updatePass()\\\">Actualiza</button>\\n                                            <button mat-raised-button color=\\\"secondary\\\" class=\\\"btn-w-md\\\" (click)=\\\"formActive = 'form'; pass = {}; updatePassForm.reset();\\\">Regresar</button>\\n                                        </div>\\n                                    </div>\\n                                </form>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </article>\\n</section>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.component.html\n// module id = ../../../../../src/app/smartity/my-profile/my-profile.component.html\n// module chunks = 24","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AuthenticationService } from '../../auth/authentication.service';\nimport { LrvTable, LrvTableColumn, LrvTableService, LrvTableOrder } from '../lrv-data-table/lrv-table';\nimport { MatSnackBar } from '@angular/material';\nimport { LoaderService, HelperService } from '../../shared';\nimport { Response } from '@angular/http';\n\n@Component({\n    selector: 'my-profile-cmp',\n    templateUrl: './my-profile.component.html',\n    styles: []\n})\nexport class MyProfileComponent implements OnInit {\n\n    private formActive = 'form';\n    private model: any= {};\n\n    private pass = {\n        password1: '',\n        password2: ''\n    };\n    private password: any = { confirm: '' };\n\n    constructor(private loaderService: LoaderService,\n                private helperService: HelperService,\n                public snackBar: MatSnackBar) {\n\n    }\n\n    ngOnInit() {\n        this.loaderService.display(true);\n        this.helperService.GET(`/api/profile`)\n        .map((response: Response) => {\n\n            const res = response.json();\n            this.model = res['data'];\n\n        }).subscribe(\n        (error) => {\n            this.loaderService.display(false);\n        },\n        (done) => {\n            this.loaderService.display(false);\n        });\n    }\n\n    private updatePass() {\n        this.loaderService.display(true); \n        const username = JSON.parse(localStorage.getItem('currentUser'))['username'];\n        this.helperService.PUT(`/api/users/change/password/${username}`, this.pass)\n        .map((response: Response) => {\n\n            const res = response.json();\n            if(res['status'] === 'success') {\n                this.formActive = 'form';\n                this.snackBar.open(res.message, 'Actualización', {\n                    duration: 3500,\n                });\n            }\n\n        }).subscribe(\n        (error) => {\n            this.loaderService.display(false);\n        },\n        (done) => {\n            this.loaderService.display(false);\n        });\n    }\n\n    private updateProfile() {\n        this.loaderService.display(true);\n        this.helperService.PUT(`/api/users/${this.model.id}`, this.model)\n        .map((response: Response) => {\n\n            const res = response.json();\n            if (res.status === 'success') {\n                this.snackBar.open(res.message, 'Actualización', {\n                    duration: 3500,\n                });\n\n                const views = res.data['usercompany']['userprofile']['privileges'];\n                localStorage.setItem('view', JSON.stringify(views));\n                localStorage.setItem('objUser', JSON.stringify(res.data));\n                window.location.reload();\n            }\n\n        }).subscribe(\n        (error) => {\n            this.loaderService.display(false);\n        },\n        (done) => {\n            this.loaderService.display(false);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.component.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from '../../shared/shared.module';\nimport { MyProfileComponent } from './my-profile.component';\n\nconst routes: Routes = [{ path: '', component: MyProfileComponent }];\n\n@NgModule({\n    imports: [\n        CommonModule,\n        RouterModule.forChild(routes),\n        SharedModule\n    ],\n    declarations: [\n        MyProfileComponent\n    ]\n})\nexport class MyProfileModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// C:/xampp3/htdocs/javelinservice/javelin/src/app/smartity/my-profile/my-profile.module.ts"],"sourceRoot":"webpack:///"}